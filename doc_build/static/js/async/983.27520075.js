"use strict";(self.webpackChunkgraphify_chart=self.webpackChunkgraphify_chart||[]).push([["983"],{7448:function(t,i){Object.defineProperty(i,Symbol.toStringTag,{value:"Module"});let e={x:0,y:0,width:100,height:100,fillStyle:"blue",borderColor:"rgba(0,0,0,0)",borderWidth:1,radius:0,zIndex:0,opcity:1},s={x:10,y:10,radius:50,startAngle:0,endAngle:2*Math.PI,fillStyle:"blue",borderColor:"rgba(0,0,0,0)",borderWidth:1,zIndex:0,opcity:1},h={x:10,y:10,fillStyle:"blue",startAngle:0,endAngle:1.5*Math.PI,borderColor:"rgba(0,0,0,0)",borderWidth:1,radius:60,zIndex:0,opcity:1};class n{drag(){this.addEventListener("mousedown",t=>{t.target&&(this.draging=!0,this.stage.draging=!0,this.dragNodeMoveX=t.x-this.x,this.dragNodeMoveY=t.y-this.y)}),this.stage.container.addEventListener("mousemove",t=>{this.draging&&(null==this||this.setAttr({x:t.offsetX/this.stage.dpr-this.dragNodeMoveX,y:t.offsetY/this.stage.dpr-this.dragNodeMoveY}))}),this.stage.container.addEventListener("mouseup",t=>{this.stage.draging=!1,this.draging=!1})}}class r extends n{constructor(t,i={}){for(let s in super(t,i),this.ctx=t.getCtx(),this.stage=t,this.type="rect",e)this[s]=(null==i?void 0:i[s])||e[s];this.children=[],this.listener={},this.draging=!1,this.draggable=i.draggable,this.draggable&&this.drag()}contains(t,i){return t>=this.x&&t<this.x+this.width&&i>=this.y&&i<this.y+this.height}setAttr(t){Object.keys(t).forEach(i=>this[i]=t[i]),this.stage.render()}addEventListener(t,i){this.listener[t]||(this.listener[t]=[]),this.listener[t].push(i)}getBox(){return{x:this.x,y:this.y,width:this.width,height:this.height}}render(){let{x:t,y:i,width:e,height:s,fillStyle:h,borderColor:n,borderWidth:r,radius:o,opcity:a}=this,l=this.ctx;l.save(),l.fillStyle=h,l.lineWidth=r,l.strokeStyle=n,l.globalAlpha=a,o?(l.lineWidth=2*r,l.beginPath(),l.moveTo(t+o,i),l.lineTo(t+e-2*o,i),l.arcTo(t+e,i,t+e,i+o,o),l.lineTo(t+e,i+s-o),l.arcTo(t+e,i+s,t+e-o,i+s,o),l.lineTo(t+o,i+s),l.arcTo(t,i+s,t,i+s-o,o),l.lineTo(t,i+o),l.arcTo(t,i,t+o,i,o),l.closePath(),l.stroke(),l.fill()):(l.fillRect(t,i,e,s),l.strokeRect(t,i,e,s)),l.restore()}}let o=0,a=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){let i=+new Date,e=Math.max(1e3/60,1e3/60-(i-o));return o=i+e,setTimeout(t,e)},l=[],d={linear:function(t,i,e,s){return e*t/s+i},ease:function(t,i,e,s){return-e*((t=t/s-1)*t*t*t-1)+i},"ease-in":function(t,i,e,s){return e*(t/=s)*t*t+i},"ease-out":function(t,i,e,s){return e*((t=t/s-1)*t*t+1)+i},"ease-in-out":function(t,i,e,s){return(t/=s/2)<1?e/2*t*t*t+i:e/2*((t-=2)*t*t+2)+i},bounce:function(t,i,e,s){return(t/=s)<1/2.75?7.5625*t*t*e+i:t<2/2.75?e*(7.5625*(t-=1.5/2.75)*t+.75)+i:t<2.5/2.75?e*(7.5625*(t-=2.25/2.75)*t+.9375)+i:e*(7.5625*(t-=2.625/2.75)*t+.984375)+i}};function c(t,i,e,s="linear"){let h=Date.now();return function n(){var r;let o=Math.min(i,Date.now()-h),c=d[s](o,0,1,i);o<i&&(e.forEach(i=>{t.setAttr({[i.attr]:i.value*c+(i.init||0)})}),r=n,l.push(r),1===l.length&&a(function(){let t=l;l=[],t.forEach(function(t){t()})}))}(),null}class g{constructor(t,i,e){this.canvas=t;let s=t.getBoundingClientRect();this.hitQueue=[],t.addEventListener(e,t=>{var h;let n=t.clientX-s.left+window.scrollX,r=t.clientY-s.top+window.scrollY,o=i.quadTree.query(n,r).filter(t=>t.contains(n,r)),a=Math.max(...o.map(t=>t.zIndex)),l=o;0!=a&&(null==(h=o.filter(t=>t.zIndex==a))?void 0:h.length)<=1?l=o.sort((t,i)=>i.zIndex-t.zIndex):l.sort((t,i)=>i.index-t.index),this.hitQueue=l[0]?[l[0]]:[],this.bindEvent(n,r,e)})}bindEvent(t,i,e){let s=!0,h={target:null,stopPropagation:()=>{s=!1}};this.hitQueue.forEach(n=>{s&&(h.target=n,n.listener[e]&&n.listener[e].forEach(e=>{e({...h,x:t,y:i})}))})}}class x{constructor(t,i=0,e){this.boundary=t,this.nodes=[],this.divided=!1,this.maxCapacity=10,this.children=[],this.depth=i,this.ctx=e,this.nodeType=["circle","rect","group","sector"]}insertNode(t){var i;return!!(this.nodeType.includes(t.type)&&this.intersects(null==(i=null==t?void 0:t.getBox)?void 0:i.call(t)))&&((t.depth=this.depth,!this.divided&&this.nodes.length<this.maxCapacity)?(this.nodes.push(t),!0):(this.divided||this.quadrant(),this.children.map(i=>i.insertNode(t)).some(t=>t)))}intersects(t){return!(t.x>this.boundary.x+this.boundary.width||t.x+t.width<this.boundary.x||t.y>this.boundary.y+this.boundary.height||t.y+t.height<this.boundary.y)}quadrant(){let t=this.boundary.x,i=this.boundary.y,e=this.boundary.width/2,s=this.boundary.height/2;this.ctx,this.children=[new x({x:t+e,y:i,width:e,height:s},this.depth+1,this.ctx),new x({x:t+e,y:i+s,width:e,height:s},this.depth+1,this.ctx),new x({x:t,y:i+s,width:e,height:s},this.depth+1,this.ctx),new x({x:t,y:i,width:e,height:s},this.depth+1,this.ctx)],this.divided=!0,this.nodes.forEach(t=>{this.children.forEach((i,e)=>{i.insertNode(t)})}),this.nodes=[]}query(t,i,e=[]){return this.containsPoint(t,i)&&(e.push(...this.nodes),this.divided&&(this.children[0].query(t,i,e),this.children[1].query(t,i,e),this.children[2].query(t,i,e),this.children[3].query(t,i,e))),e}containsPoint(t,i){return t>=this.boundary.x&&t<=this.boundary.x+this.boundary.width&&i>=this.boundary.y&&i<=this.boundary.y+this.boundary.height}}let u={show:!0,imgType:"png",title:"图形",icon:'<svg \n      xmlns="http://www.w3.org/2000/svg" \n      width="24" \n      height="24" \n      viewBox="0 0 24 24"\n      fill="none" \n      stroke="#000" \n      stroke-width="2"\n    >\n      <path d="M12 3v12m0 0l-3-3m3 3l3-3"/>\n      <path d="M5 21h14"/>\n    </svg>'};console.log(123),i.BarChart=class{constructor(t,i={}){this.ctx=t.getCtx(),this.stage=t,this.canvas=this.ctx.canvas,this.data=i.data,this.options={margin:50,barColor:["#4A90E2","#7ED321","#F5A623"],animationDuration:1e3,animation:!0,labelStyle:{fontSize:12,fontFamily:window.getComputedStyle(document.body,null).getPropertyValue("font-family"),color:"#333"},axisStyle:{color:"#666",lineWidth:1},...i},this.font=`${this.options.labelStyle.fontSize}px ${this.options.labelStyle.fontFamily}`,this.width=this.canvas.width/t.dpr,this.height=this.canvas.height/t.dpr,this.chartWidth=this.width-2*this.options.margin,this.chartHeight=this.height-2*this.options.margin,this.maxValue=Math.max(...i.data.map(t=>t.value)),this.animationStart=null,this.drawBars();let e=document.createElement("div");e.id="graphify-tooltip",this.stage.container.appendChild(e),this.canvas.addEventListener("mousemove",this.showTooltip.bind(this))}render(){this.drawGrid(),this.drawAxes()}drawAxes(){this.ctx.save(),this.ctx.fillStyle=this.options.labelStyle.color,this.ctx.strokeStyle=this.options.axisStyle.color,this.ctx.lineWidth=this.options.axisStyle.lineWidth,this.ctx.beginPath(),this.ctx.moveTo(this.options.margin,this.options.margin),this.ctx.lineTo(this.options.margin,this.height-this.options.margin),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(this.options.margin,this.height-this.options.margin),this.ctx.lineTo(this.width-this.options.margin,this.height-this.options.margin),this.ctx.stroke(),this.ctx.textAlign="right",this.ctx.textBaseline="middle",this.ctx.font=this.font;for(let t=0;t<=5;t++){let i=this.height-this.options.margin-t*this.chartHeight/5,e=Math.round(t/5*this.maxValue);this.ctx.fillText(e,this.options.margin-10,i)}this.ctx.textAlign="center",this.ctx.textBaseline="top";let t=this.chartWidth/this.data.length;this.data.forEach((i,e)=>{this.ctx.fillText(i.label,this.options.margin+e*t+t/2,this.height-this.options.margin+10)}),this.ctx.restore()}drawGrid(){this.ctx.save(),this.ctx.strokeStyle="#EEE",this.ctx.setLineDash([5,5]);for(let t=1;t<5;t++){let i=this.height-this.options.margin-t*this.chartHeight/5;this.ctx.beginPath(),this.ctx.moveTo(this.options.margin,i),this.ctx.lineTo(this.width-this.options.margin,i),this.ctx.stroke()}this.ctx.restore()}drawBars(){let{animationDuration:t,animation:i}=this.options,e=this.chartWidth/this.data.length*.8,s=.2*e;this.data.forEach((h,n)=>{let o=this.options.margin+n*(e+s)+20,a=h.value/this.maxValue*this.chartHeight,l=this.height-this.options.margin-a,d=new r(this.stage,{x:o,y:l,width:e,height:a,fillStyle:this.options.barColor[n%this.options.barColor.length]});i&&c(d,t,[{attr:"y",value:-a,init:l+a},{attr:"height",value:a}]),this.stage.appendChild(d)}),this.stage.appendChild(this)}showTooltip(t){let i=this.canvas.getBoundingClientRect(),e=t.clientX-i.left,s=t.clientY-i.top,h=this.chartWidth/this.data.length*.8,n=.2*h,r=document.getElementById("graphify-tooltip"),o="";this.data.some((t,i)=>{let a=this.options.margin+i*(h+n);return e>a&&e<a+h&&s<this.height-this.options.margin&&s>this.options.margin?(o=`<div  style="box-sizing: content-box; height:50px; position: absolute; left: ${e+20}px; top: ${s+20}px; background-color: rgb(255, 255, 255);  box-shadow: rgba(0, 0, 0, 0.2) 1px 2px 10px; padding: 10px; width: 200px; pointer-events: none;  border-radius: 8px; flex-direction: column; gap: 10px;"><div style="font-size: 16px;">${t.label}</div>
        <div style="display: flex; align-items: center; gap: 8px;">
          <div style="margin-top:5px;width: 12px; height: 12px; border-radius: 50%; flex-shrink: 0; background-color: ${this.options.barColor[i%this.options.barColor.length]};"></div> 
          <div></div>
          <div style="margin-left: auto; ">${t.value}</div>
        </div>
        </div>`,r.style.display="block",!0):(r.style.display="none",!1)})&&(r.innerHTML=o)}},i.Circle=class extends n{constructor(t,i={}){for(let e in super(t,i),this.ctx=t.getCtx(),this.stage=t,this.type="circle",s)this[e]=(null==i?void 0:i[e])||s[e];this.children=[],this.listener={},this.draging=!1,this.draggable=i.draggable,this.draggable&&this.drag()}contains(t,i){let e=this.x-this.radius,s=this.x+this.radius,h=this.y-this.radius,n=this.y+this.radius;if(!(t>=e&&t<=s&&i>=h&&i<=n))return!1;let r=t-this.x,o=i-this.y;return r*r+o*o<=this.radius*this.radius}getBox(){return{x:this.x-this.radius,y:this.y-this.radius,width:2*this.radius,height:2*this.radius}}setAttr(t){Object.keys(t).forEach(i=>this[i]=t[i]),this.stage.render()}appendChild(...t){t.length>0&&(t.forEach(t=>{this.children.push(t)}),this.stage.render())}addEventListener(t,i){this.listener[t]||(this.listener[t]=[]),this.listener[t].push(i)}render(){let{x:t,y:i,radius:e,startAngle:s,endAngle:h,fillStyle:n,borderColor:r,borderWidth:o,opcity:a}=this,l=this.ctx;l.save(),l.beginPath(),l.arc(t,i,e,s,h),l.fillStyle=n,l.strokeStyle=r||"rgba(0,0,0,0)",l.lineWidth=o,l.globalAlpha=a,l.fill(),l.stroke(),l.closePath(),l.restore()}},i.Group=class extends n{constructor(t,i={}){super(t,i),this.ctx=t.getCtx(),this.stage=t,this.type="group",this.x=0,this.y=0,this.children=[],this.listener={},this.childrenPosition=[],this.draging=!1,this.draggable=i.draggable,this.draggable&&this.drag()}contains(t,i){return this.children.some(e=>e.contains(t,i))}setAttr(t){let{x:i=0,y:e=0}=t;this.x=i,this.y=e,this.children.forEach((s,h)=>{let n={...t,x:i+this.childrenPosition[h].x,y:e+this.childrenPosition[h].y};s.setAttr(n)}),this.stage.render()}appendChild(...t){t.length>0&&(t.forEach(t=>{this.children.push(t),this.childrenPosition.push({x:t.x,y:t.y})}),this.stage.render())}getBox(){return!0}addEventListener(t,i){this.listener[t]||(this.listener[t]=[]),this.listener[t].push(i)}render(){this.children.length>0&&this.children.sort((t,i)=>t.zIndex-i.zIndex).forEach(t=>{t.render()})}},i.Line=class{constructor(t,i={}){var e,s,h,n;this.stage=t,this.ctx=t.getCtx(),this.type="line",this.opcity=i.opcity||1,this.lineType=i.lineType||"line",this.x1=i.x1||0,this.y1=i.y1||0,this.x2=i.x2||100,this.y2=i.y2||100,this.controlX1=null==(e=i.control1)?void 0:e.x,this.controlY1=null==(s=i.control1)?void 0:s.y,this.controlX2=null==(h=i.control2)?void 0:h.x,this.controlY2=null==(n=i.control2)?void 0:n.y,this.borderColor=i.borderColor||"red",this.lineWidth=i.lineWidth,this.lineCap=i.lineCap,this.children=[],this.listener={},this.showControlPoints=i.showControlPoints,this.controlPointColor=i.controlPointColor,this.controlPointRadius=i.controlPointRadius}contains(t,i){return!1}setAttr(t){Object.keys(t).forEach(i=>this[i]=t[i]),this.stage.render()}addEventListener(t,i){this.listener[t]||(this.listener[t]=[]),this.listener[t].push(i)}getBox(){return{x:this.x,y:this.y,width:this.width,height:this.height}}render(){let t=this.ctx;switch(t.save(),t.beginPath(),t.moveTo(this.x1,this.y1),t.globalAlpha=this.opcity,this.lineType){case"quadratic":t.quadraticCurveTo(this.controlX1,this.controlY1,this.x2,this.y2);break;case"cubic":t.bezierCurveTo(this.controlX1,this.controlY1,this.controlX2,this.controlY2,this.x2,this.y2);break;default:t.lineTo(this.x2,this.y2)}t.strokeStyle=this.borderColor,t.lineWidth=this.lineWidth,t.lineCap=this.lineCap,t.stroke(),t.closePath(),t.restore(),this.showControlPoints&&this.drawControlPoints(t)}drawControlPoints(t){let i=[[this.x1,this.y1],[this.x2,this.y2]].map(t=>new Circle(this.stage,{x:t[0],y:t[1],radius:this.controlPointRadius,startAngle:0,endAngle:2*Math.PI,fillStyle:this.controlPointColor,zIndex:2}));this.appendChild(...i)}},i.LineChart=class{constructor(t,i={}){this.ctx=t.getCtx(),this.stage=t,this.canvas=this.ctx.canvas,this.options={margin:30,lineColor:"blue",pointRadius:0,fontSize:12,labelStyle:{fontSize:12,fontFamily:window.getComputedStyle(document.body,null).getPropertyValue("font-family"),color:"#333"},axisStyle:{color:"#666",lineWidth:1},...i},this.font=`${this.options.labelStyle.fontSize}px ${this.options.labelStyle.fontFamily}`,this.width=this.canvas.width/t.dpr,this.height=this.canvas.height/t.dpr,this.chartWidth=this.width-2*this.options.margin,this.chartHeight=this.height-2*this.options.margin,this.render();let e=document.createElement("div");e.id="graphify-tooltip",this.stage.container.appendChild(e),this.canvas.addEventListener("mousemove",this.showTooltip.bind(this))}calculateYAxis(){let t=Math.max(...this.options.data.map(t=>t.value));this.yMax=10*Math.ceil(t/10),this.yStep=this.yMax/5}drawAxes(){let{ctx:t,options:i}=this;t.save(),this.ctx.fillStyle=this.options.labelStyle.color,this.ctx.strokeStyle=this.options.axisStyle.color,this.ctx.lineWidth=this.options.axisStyle.lineWidth,t.beginPath(),t.moveTo(i.margin,i.margin),t.lineTo(i.margin,this.height-i.margin),t.stroke(),t.beginPath(),t.moveTo(i.margin,this.height-i.margin),t.lineTo(this.width-i.margin,this.height-i.margin),t.stroke(),t.textAlign="right",t.textBaseline="middle",t.font=this.font;for(let e=0;e<=5;e++){let s=this.height-i.margin-e*this.chartHeight/5,h=e*this.yStep;t.fillText(h.toFixed(0),i.margin-10,s)}t.textAlign="center",t.textBaseline="top",i.data.forEach((e,s)=>{let h=i.margin+s*this.chartWidth/(i.data.length-1);t.fillText(e.label,h,this.height-i.margin+10)}),t.restore()}drawLine(){let{ctx:t,options:i}=this;t.save(),t.beginPath(),t.strokeStyle=i.lineColor,t.lineWidth=2,t.moveTo(0,0);let e=i.data.map((t,e)=>({x:i.margin+e*this.chartWidth/(i.data.length-1),y:this.height-i.margin-t.value*this.chartHeight/this.yMax}));i.smooth?this.drawSmoothCurve(e):e.forEach((i,e)=>{0===e?t.moveTo(i.x,i.y):t.lineTo(i.x,i.y)}),t.stroke(),e.forEach(e=>{t.beginPath(),t.arc(e.x,e.y,i.pointRadius,0,2*Math.PI),t.fillStyle=i.lineColor,t.fill()}),t.restore()}drawSmoothCurve(t){}calculateControlPoint(t,i,e,s){let h=.5*s,n=i>0?t[i-1]:t[i],r=e<t.length-1?t[e+1]:t[e];return{x:t[i].x+h*(r.x-n.x),y:t[i].y+h*(r.y-n.y)}}showTooltip(t){let i=this.canvas.getBoundingClientRect(),e=t.clientX-i.left,s=t.clientY-i.top;this.ctx.clearRect(0,0,this.width,this.height),this.drawAxes(),this.drawLine();let h=document.getElementById("graphify-tooltip"),n="";this.options.data.some((t,i)=>{let r=this.options.margin+i*this.chartWidth/(this.options.data.length-1),o=this.height-this.options.margin-t.value*this.chartHeight/this.yMax;return 10>Math.abs(e-r)&&10>Math.abs(s-o)?(n=`<div  style="box-sizing: content-box; height:50px; position: absolute; left: ${r+10}px; top: ${o+10}px; background-color: rgb(255, 255, 255);  box-shadow: rgba(0, 0, 0, 0.2) 1px 2px 10px; padding: 10px; width: 200px; pointer-events: none;  border-radius: 8px; flex-direction: column; gap: 10px;"><div style="font-size: 16px;">${t.label}</div>
          <div style="display: flex; align-items: center; gap: 8px;">
            <div style="margin-top:5px;width: 12px; height: 12px; border-radius: 50%; flex-shrink: 0; background-color: #0052D9;"></div> 
            <div></div>
            <div style="margin-left: auto; ">${t.value}</div>
          </div>
          </div>`,h.style.display="block",!0):(h.style.display="none",!1)})&&(h.innerHTML=n)}render(){this.calculateYAxis(),this.drawAxes(),this.drawLine(),this.stage.appendChild(this)}},i.PieChart=class{constructor(t,i){this.ctx=t.getCtx(),this.stage=t,this.canvas=this.ctx.canvas,this.options={radius:150,innerRadius:0,colors:["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEEAD"],hoverOffset:15,labelFont:"14px Arial",labelStyle:{fontSize:12,fontFamily:window.getComputedStyle(document.body,null).getPropertyValue("font-family"),color:"#333"},...i},this.data=i.data,this.center={x:this.canvas.width/2/t.dpr,y:this.canvas.height/2/t.dpr},this.total=this.data.reduce((t,i)=>t+i.value,0),this.hoverIndex=-1,this.render()}render(){this.clear(),this.drawSegments(),this.drawLabels(),-1!==this.hoverIndex&&this.drawTooltip(),this.stage.appendChild(this)}drawSegments(){let t=-Math.PI/2,{radius:i,innerRadius:e,colors:s,hoverOffset:h}=this.options;this.data.forEach((n,r)=>{let o=t+n.value/this.total*Math.PI*2,a=r===this.hoverIndex?h:0,l=(t+o)/2;this.ctx.save(),this.ctx.translate(Math.cos(l)*a,Math.sin(l)*a),this.ctx.beginPath(),this.ctx.moveTo(this.center.x,this.center.y),this.ctx.arc(this.center.x,this.center.y,i,t,o),e>0&&this.ctx.arc(this.center.x,this.center.y,e,o,t,!0),this.ctx.closePath(),this.ctx.fillStyle=s[r%s.length],this.ctx.fill(),this.ctx.restore(),t=o})}drawLabels(){let{radius:t,innerRadius:i}=this.options,e=i>0?t+35:.6*t;this.ctx.fillStyle=this.options.labelStyle.color,this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.font=`${this.options.labelStyle.fontSize}px ${this.options.labelStyle.fontFamily}`;let s=-Math.PI/2;this.data.forEach(t=>{let i=t.value/this.total*Math.PI*2,h=s+i/2,n=this.center.x+Math.cos(h)*e,r=this.center.y+Math.sin(h)*e;this.ctx.fillText(`${t.label} (${(t.value/this.total*100).toFixed(1)}%)`,n,r),s+=i})}drawTooltip(){let t=this.data[this.hoverIndex],{innerRadius:i}=this.options,e=i>0?this.center.y+i/2:this.center.y;this.ctx.fillStyle="#333",this.ctx.font=this.options.labelFont,this.ctx.textAlign="center",this.ctx.fillText(`${t.label}: ${t.value}`,this.center.x,e)}handleHover(t){let i=this.canvas.getBoundingClientRect(),e=t.clientX-i.left-this.center.x,s=t.clientY-i.top-this.center.y,h=Math.sqrt(e*e+s*s),n=Math.atan2(s,e),{radius:r,innerRadius:o}=this.options;this.hoverIndex=(o>0?h<=r&&h>=o:h<=r)?this.getHoverIndex(n):-1,this.draw()}getHoverIndex(t){let i=-Math.PI/2;for(let e=0;e<this.data.length;e++){let s=i+this.data[e].value/this.total*Math.PI*2,h=(t+2.5*Math.PI)%(2*Math.PI);if(h>=i&&h<s)return e;i=s}return -1}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}},i.Rect=r,i.Sector=class extends n{constructor(t,i={}){for(let e in super(t,i),this.stage=t,this.ctx=t.getCtx(),this.type="sector",h)this[e]=(null==i?void 0:i[e])||h[e];this.children=[],this.listener={},this.draging=!1,this.draggable=i.draggable,this.draggable&&this.drag()}contains(t,i){let e=t-this.x,s=i-this.y;if(e*e+s*s>this.radius*this.radius)return!1;if(1e-6>Math.abs((this.endAngle-this.startAngle)%(2*Math.PI)))return!0;let h=Math.atan2(s,e);h=h<0?h+2*Math.PI:h;let n=this.startAngle%(2*Math.PI);n=n<0?n+2*Math.PI:n;let r=this.endAngle%(2*Math.PI);return n<(r=r<0?r+2*Math.PI:r)?h>=n&&h<=r:h>=n||h<=r}setAttr(t){Object.keys(t).forEach(i=>this[i]=t[i]),this.stage.render()}addEventListener(t,i){this.listener[t]||(this.listener[t]=[]),this.listener[t].push(i)}getBox(){return{x:this.x-this.radius,y:this.y-this.radius,width:this.x+this.radius,height:this.y+this.radius}}render(){let t=this.ctx;t.save(),t.beginPath(),t.arc(this.x,this.y,this.radius,this.startAngle,this.endAngle),t.lineTo(this.x,this.y),t.closePath(),t.globalAlpha=this.opcity,t.fillStyle=this.fillStyle,t.fill(),t.lineWidth=this.borderWidth,t.strokeStyle=this.borderColor,t.stroke(),t.restore()}},i.Stage=class{constructor(t,i,e,s=u){this.container=t;let h=document.createElement("canvas");this.canvas=h;let n=null==this?void 0:this.container.getBoundingClientRect(),r=window.devicePixelRatio;this.dpr=r,h.width=(i||n.width)*r,h.height=(e||n.height)*r,h.style.transform=`scale(${1/r},${1/r})`,h.style.position="relative",h.style.left="-50%",h.style.top="-50%";let o=h.getContext("2d");if(o.scale(r,r),o.font=`24px ${window.getComputedStyle(document.body,null).getPropertyValue("font-family")}`,this.container.style.position="relative",this.container.appendChild(h),u.show){let{width:t}=this.container.getBoundingClientRect(),i=document.createElement("div");i.innerHTML=u.icon,i.style.position="absolute",i.style.top="12px",i.style.left=t-48+"px",i.style.cursor="pointer",i.addEventListener("click",()=>{!function(t,{title:i,imgType:e}){let s=t.toDataURL(`image/${e}`),h=document.createElement("a");document.body.appendChild(h),h.href=s,h.download=i,h.click()}(this.canvas,s)}),this.container.appendChild(i)}this.children=[],this.ctx=o,this.quadTree=new x({x:0,y:0,width:o.canvas.width,height:o.canvas.height},0,this.ctx),["click","dblclick","mousedown","mouseup","mousemove","mouseenter","mouseleave"].forEach(t=>new g(h,this,t)),this.isRendering=!1,this.index=0,this.isQuadTreeUpdate=!1,this.dragNode=null,this.dragNodeMoveX=0,this.dragNodeMoveY=0,this.render(),this.draging=!1,this.pendingChildren=[]}getCtx(){return this.ctx}appendChild(...t){t.forEach(t=>{t.index=this.index,this.index=this.index+1,this.children.push(t)}),this.render(),this.isQuadTreeUpdate=!0}getChildren(t){if(!t)return this.children||[];let i=this.children||[],e=[];return i.forEach(function(i){t(i)&&e.push(i)}),e}destroyChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0}),this.children=[],this.render(),this}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}hasChildren(){return this.getChildren().length>0}render(){this.isRendering||(this.isRendering=!0,requestAnimationFrame(()=>{this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.children.sort((t,i)=>t.zIndex-i.zIndex).forEach(t=>{t.render()}),this.isQuadTreeUpdate&&!this.draging&&(this.children.forEach(t=>{var i;this.quadTree.insertNode(t),(null==(i=t.children)?void 0:i.length)>0&&(t.level=0,t.children.forEach(t=>{t.level=1,this.quadTree.insertNode(t)}))}),this.isQuadTreeUpdate=!1),this.isRendering=!1},0))}},i.animation=c},92:function(t,i,e){e.d(i,{Z:()=>a});var s=e(5893),h=e(8855),n=e(7294),r=e(9361);let o=t=>{let{color:i="currentColor",...e}=t;return(0,s.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:i,strokeWidth:"4",...e,children:(0,s.jsx)("path",{d:"M16.7336 12.6863L5.41992 24L16.7336 35.3137M31.2551 12.6863L42.5688 24L31.2551 35.3137M27.1999 6.28003L20.9486 41.7331",strokeLinecap:"butt"})})},a=t=>{let{children:i,isMobile:e,demoId:a}=t,{page:l}=(0,h.Vi)(),[d,c]=(0,n.useState)(!1),g=(0,h.Jr)(),x=`/~demo/${a}`,u=()=>(null==l?void 0:l.devPort)?`http://localhost:${l.devPort}/${a}`:"undefined"!=typeof window?`${window.location.origin}${(0,h.pJ)(x)}`:"",p=(0,n.useCallback)(t=>{d||t.currentTarget.blur(),c(!d)},[d]),[y,v]=(0,n.useState)(0),m=(0,n.useCallback)(()=>{v(Math.random())},[]);return(0,s.jsx)(h.ri,{children:(0,s.jsx)("div",{className:"rspress-preview",children:"true"===e?(0,s.jsxs)("div",{className:"rspress-preview-wrapper flex",children:[(0,s.jsx)("div",{className:"rspress-preview-code",children:null==i?void 0:i[0]}),(0,s.jsxs)("div",{className:"rspress-preview-device",children:[(0,s.jsx)("iframe",{src:u()},y),(0,s.jsx)(r.Z,{url:u(),refresh:m})]})]}):(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"rspress-preview-card",children:[(0,s.jsx)("div",{style:{overflow:"auto",flex:"auto"},children:null==i?void 0:i[1]}),(0,s.jsx)("div",{className:"rspress-preview-operations web",children:(0,s.jsx)("button",{onClick:p,"aria-label":"zh"===g?"收起代码":"Collapse Code",className:d?"button-expanded":"",children:(0,s.jsx)(o,{})})})]}),(0,s.jsx)("div",{className:`${d?"rspress-preview-code-show":"rspress-preview-code-hide"}`,children:null==i?void 0:i[0]})]})})})}}}]);