"use strict";(self.webpackChunkgraphify_chart=self.webpackChunkgraphify_chart||[]).push([["880"],{526:function(e,n,t){t.r(n),t.d(n,{default:()=>f});var r=t(5893),a=t(65),l=t(7294),i=t(7448);let c=Array(5e3).fill(null),s=()=>{let e=0,n=0;return c.map((t,r)=>{n>26&&(e+=1,n=0);let a=25*n;n+=1;let l=0;return{x:a,y:25*e,width:20,height:20,fillStyle:"blue"}})},u=function(){let e=(0,l.useRef)(null);return(0,l.useEffect)(()=>{var n;let t;let r=new i.Stage(e.current),a=s().map(e=>new i.Rect(r,e));a.forEach(e=>{r.appendChild(e)});let l=(n=()=>{a.forEach(e=>{(0,i.animation)(e,500,[{attr:"width",value:20}])})},t=setTimeout(function e(){n(),t=setTimeout(e,1e3)},1e3),{clear:()=>{clearTimeout(t)}});return()=>{var e;null==l||null===(e=l.clear)||void 0===e||e.call(l)}},[]),(0,r.jsx)("div",{ref:e,style:{height:5e3}})};var o=t(92);function m(e){let n=Object.assign({h1:"h1",a:"a",pre:"pre",code:"code"},(0,a.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.h1,{id:"高性能表现",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#高性能表现",children:"#"}),"高性能表现"]}),"\n",(0,r.jsxs)(o.Z,{isMobile:"false",demoId:"_perfomance_nodes_1",children:[(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",meta:"preview",children:"import {useEffect,useState,useRef} from 'react';\nimport {Stage,Rect,Group,animation} from 'graphify-chart';\nconst emptyArr = new Array(5000).fill(null);\nconst margin = 5;\nconst size = 20;\nfunction mySetInterval(callback, delay) {\n  let timerId;\n\n  function repeat() {\n    callback();         \n    timerId = setTimeout(repeat, delay); \n  }\n  timerId = setTimeout(repeat, delay);\n  return {\n    clear: () => {\n      clearTimeout(timerId); \n    }\n  };\n}\nconst rectList = () => {\n  let row = 0\n  let clumns = 0\n\n  return emptyArr.map((v,i) => {\n    if(clumns > 26){\n      row = row +1;\n      clumns  = 0;\n    }\n    let x =( size+ margin) * clumns ;\n    clumns +=1;\n    let y = 0;\n     y = ( size+ margin) * row ;\n    \n    return {\n      x,\n      y,\n      width:size,\n      height:size,\n      fillStyle:'blue'\n    }\n  })\n}\nfunction App() {\n  const chartRef = useRef(null);\n  useEffect(() => {\n    const stage = new Stage(chartRef.current);\n    const rects = rectList().map(v => new Rect(stage,v) )\n    rects.forEach(element => {\n      stage.appendChild(element);\n    });\n    \n    const timer = mySetInterval(() => {\n      rects.forEach(element => {\n        animation(element,500,[{attr:'width',value:20}])\n    });\n    }, 1000);\n    return () => {\n      timer?.clear?.()\n    }\n\n  },[])\n  \n  return ( <div ref={chartRef} style={{height:5000}} ></div>)\n}\nexport default App;\n"})}),(0,r.jsx)(u,{})]})]})}function h(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,a.ah)(),e.components);return n?(0,r.jsx)(n,Object.assign({},e,{children:(0,r.jsx)(m,e)})):m(e)}let f=h;h.__RSPRESS_PAGE_META={},h.__RSPRESS_PAGE_META["perfomance%2Fnodes.mdx"]={toc:[],title:"高性能表现",headingTitle:"高性能表现",frontmatter:{}}}}]);